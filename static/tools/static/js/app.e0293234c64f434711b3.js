webpackJsonp([1],{"5jfi":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-header",{staticStyle:{padding:"0"}},[n("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b","default-active":"1",router:"true"}},[n("el-menu-item",{attrs:{index:"1",route:{name:"Sql2Go"}}},[t._v("SQL转Struct")]),t._v(" "),n("el-menu-item",{attrs:{index:"2",route:{name:"Json2Go"}}},[t._v("Json转Struct")]),t._v(" "),n("el-menu-item",{attrs:{index:"3",route:{name:"FormatJson"}}},[t._v("Json格式化")]),t._v(" "),n("el-menu-item",{staticStyle:{float:"right"}},[n("a",{attrs:{href:"https://blog.lpflpf.cn"}},[t._v("博客")])]),t._v(" "),n("el-menu-item",{staticStyle:{float:"right"}},[n("a",{attrs:{href:"https://github.com/lpflpf"}},[t._v("github")])])],1)],1),t._v(" "),n("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App",metaInfo:{meta:[{name:"viewport",content:"width=device-width, initial-scale=0,user-scalable=no,maximum-scale=1.0"}]}},s,!1,function(t){n("5jfi")},null,null).exports,r={name:"Sql2Go",data:()=>({msg:"sql convert to golang struct",useGorm:!0,useJson:!0,useForm:!0,sqlContent:""}),watch:{},computed:{structContent(){return this.sql2go(this.sqlContent,this.useGorm,this.useJson,this.useForm)}},methods:{sql2go:function(t,e,n,s){let o={tinyint:"int64",smallint:"int64",int:"int64",mediumint:"int64",bigint:"int64",float:"float64",double:"float64",decimal:"float64",char:"string",varchar:"string",text:"string",mediumtext:"string",longtext:"string",time:"time.Time",date:"time.Time",datetime:"time.Time",timestramp:"int64",enum:"string",set:"string",blob:"string"};function r(t){const e=t.toLowerCase().split("_");for(let t=0;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].substring(1,e[t].length);return e.join("")}function a(t){const e=["ACL","API","ASCII","CPU","CSS","DNS","EOF","GUID","HTML","HTTP","HTTPS","ID","IP","JSON","LHS","QPS","RAM","RHS","RPC","SLA","SMTP","SQL","SSH","TCP","TLS","TTL","UDP","UI","UID","UUID","URI","URL","UTF8","VM","XML","XMPP","XSRF","XSS"];return t.replace(/(^|[^a-zA-Z])([a-z]+)/g,function(t,n,s){return e.indexOf(s.toUpperCase())>=0?n+s.toUpperCase():n+s[0].toUpperCase()+s.substr(1).toLowerCase()}).replace(/([A-Z])([a-z]+)/g,function(t,n,s){return e.indexOf(n+s.toUpperCase())>=0?(n+s).toUpperCase():n+s})}if(""===t.trim())return"";let l=/CREATE\sTABLE\s`([\w_]+)\`\s\(/gim.exec(t);if(!l)return"invalid sql";let i,c=r(l[1].trim()),u=t.substring(l[0].length).trim(),m="type "+c+" struct {";for(;l=/^\`([\w_]+)\`\s+(tinyint|smallint|int|mediumint|bigint|float|double|decimal|varchar|char|text|mediumtext|longtext|datetime|time|date|enum|set|blob)?.*[^`]+/.exec(u);){let t=r(l[1]);const c=o[l[2]];let p=l[1].toLowerCase();m+="\n\t"+(t=a(t))+" "+c+" ",i=[],e&&i.push('gorm:"column:'+p+'"'),n&&i.push('json:"'+p+'"'),s&&i.push('form:"'+p+'"'),i.length>0&&(m+="`"+i.join(" ")+"`"),u=u.substring(l[0].length),(l=/COMMENT\s+['"](.*)['"]/gi.exec(l[0]))&&(m+="  // "+l[1])}return m+="\n}"}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",{staticClass:"Sql2Go"},[n("el-row",{attrs:{gutter:24}},[n("h2",[n("el-col",{attrs:{span:20}},[n("el-checkbox",{attrs:{label:"gorm",border:""},model:{value:t.useGorm,callback:function(e){t.useGorm=e},expression:"useGorm"}},[t._v("gorm")]),t._v(" "),n("el-checkbox",{attrs:{label:"json",border:""},model:{value:t.useJson,callback:function(e){t.useJson=e},expression:"useJson"}},[t._v("json")]),t._v(" "),n("el-checkbox",{attrs:{label:"form",border:""},model:{value:t.useForm,callback:function(e){t.useForm=e},expression:"useForm"}},[t._v("form")])],1)],1)]),t._v(" "),n("el-row",{staticClass:"textareatitle",attrs:{gutter:24}},[n("el-col",{attrs:{span:12}},[n("h3",[t._v(" sql ")])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("h3",[t._v("go struct")])])],1),t._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{staticStyle:{padding:"0"},attrs:{span:12}},[n("el-input",{staticClass:"leftinput",attrs:{type:"textarea",placeholder:"建表语句",rows:32},model:{value:t.sqlContent,callback:function(e){t.sqlContent=e},expression:"sqlContent"}})],1),t._v(" "),n("el-col",{staticStyle:{padding:"0"},attrs:{span:12}},[n("el-input",{staticClass:"rightinput",attrs:{type:"textarea",placeholder:"Golang Struct 语句",rows:32,value:t.structContent}})],1)],1)],1)},staticRenderFns:[]};var l=n("VU/8")(r,a,!1,function(t){n("TyYf")},null,null).exports,i={name:"Json2Go",data:()=>({msg:"json convert to golang struct",useGorm:!0,useJson:!0,useForm:!0,flatten:!0,jsonContent:""}),computed:{structContent(){return""===this.jsonContent?"":this.jsonToGo(this.jsonContent,this.useGorm,this.useJson,this.useForm,this.flatten)}},methods:{jsonToGo:function(t,e,n,s,o=!0){let r,a,l="",i=0;const c={},u=[];let m="",p=0,f="";try{a=r=JSON.parse(t.replace(/:(\s*\d*)\.0/g,":$1.1"))}catch(t){return t.message}return g(`type ${j("AutoGenerated")} `),d(a),o?l+=m:l;function d(t,e=0){if("object"==typeof t&&null!==t)if(Array.isArray(t)){let n;const s=t.length;for(let e=0;e<s;e++){const s=C(t[e]);if(n){if(n!=s&&"interface{}"==(n=_(s,n)))break}else n=s}const r=o&&["struct","slice"].includes(n)?`[]${f}`:"[]";if(o&&e>=2?v(r):g(r),"struct"==n){const n={};for(let e=0;e<s;e++){const s=Object.keys(t[e]);for(let o in s){let r=s[o];if(r in n){const s=n[r].value,o=t[e][r];if(y(s,o)){U(Object.keys(o),Object.keys(s))||(n[r=`${r}_${"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})}`]={value:o,count:0})}}else n[r]={value:t[e][r],count:0};n[r].count++}}const o=Object.keys(n),r={},a={};for(let t in o){const e=o[t],l=n[e];r[e]=l.value,a[e]=l.count!=s}h(e+1,p,r,a)}else"slice"==n?d(t[0],e):o&&e>=2?v(n||"interface{}"):g(n||"interface{}")}else o&&(e>=2?v(f):g(f)),h(e+1,p,t);else o&&e>=2?v(C(t)):g(C(t))}function h(t,r,a,l){if(o&&u.push(t>=2?"\n":""),o&&t>=2){const o=`type ${f}`,i=function(t){for(let e in t)t[e]=j(t[e]);return t}(Object.keys(a));if(f in c&&U(i,c[f]))return void u.pop();c[f]=i,v(`${o} struct {\n`),++r;const m=Object.keys(a);for(let o in m){const i=S(m[o]);x(r);const c=j(i);v(c+" "),f=c,d(a[m[o]],t);let u=[];if(e&&u.push('gorm:"column:'+i+'"'),n){let t='json:"'+i;l&&!0===l[m[o]]?t+=',omitempty"':t+='"',u.push(t)}s&&u.push('form:"'+i+'"'),u.length>0&&v(" `"+u.join(" ")+"`"),v("\n")}x(--r),v("}")}else{g("struct {\n"),++i;const o=Object.keys(a);for(let r in o){const c=S(o[r]);b(i);const u=j(c);g(u+" "),f=u,d(a[o[r]],t);let m=[];if(e&&m.push('gorm:"column:'+c+'"'),n){let t='json:"'+c;l&&!0===l[o[r]]?t+=',omitempty"':t+='"',m.push(t)}s&&m.push('form:"'+c+'"'),m.length>0&&g("`"+m.join(" ")+"`"),g("\n")}b(--i),g("}")}o&&(m+=u.pop())}function b(t){for(let e=0;e<t;e++)l+="\t"}function g(t){l+=t}function x(t){for(let e=0;e<t;e++)u[u.length-1]+="\t"}function v(t){u[u.length-1]+=t}function j(t){if(!t)return"";if(t.match(/^\d+$/))t="Num"+t;else if(t.charAt(0).match(/\d/)){t={0:"Zero_",1:"One_",2:"Two_",3:"Three_",4:"Four_",5:"Five_",6:"Six_",7:"Seven_",8:"Eight_",9:"Nine_"}[t.charAt(0)]+t.substr(1)}return function(t){const e=["ACL","API","ASCII","CPU","CSS","DNS","EOF","GUID","HTML","HTTP","HTTPS","ID","IP","JSON","LHS","QPS","RAM","RHS","RPC","SLA","SMTP","SQL","SSH","TCP","TLS","TTL","UDP","UI","UID","UUID","URI","URL","UTF8","VM","XML","XMPP","XSRF","XSS"];return t.replace(/(^|[^a-zA-Z])([a-z]+)/g,function(t,n,s){return e.indexOf(s.toUpperCase())>=0?n+s.toUpperCase():n+s[0].toUpperCase()+s.substr(1).toLowerCase()}).replace(/([A-Z])([a-z]+)/g,function(t,n,s){return e.indexOf(n+s.toUpperCase())>=0?(n+s).toUpperCase():n+s})}(t).replace(/[^a-z0-9]/gi,"")||"NAMING_FAILED"}function C(t){if(null===t)return"interface{}";switch(typeof t){case"string":return/\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(\+\d\d:\d\d|Z)/.test(t)?"time.Time":"string";case"number":return t%1==0?t>-2147483648&&t<2147483647?"int":"int64":"float64";case"boolean":return"bool";case"object":return Array.isArray(t)?"slice":"struct";default:return"interface{}"}}function _(t,e){return"float"==t.substr(0,5)&&"int"==e.substr(0,3)?t:"int"==t.substr(0,3)&&"float"==e.substr(0,5)?e:"interface{}"}function S(t){const e=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;if(t.length>=36){const n=t.substr(-36);if(e.test(n))return t.slice(0,-37)}return t}function y(t,e){return"[object Object]"===Object.prototype.toString.call(t)&&"[object Object]"===Object.prototype.toString.call(e)}function U(t,e){const n=t.length,s=e.length;if(0==n&&0==s)return!0;if(n!=s)return!1;for(let n of t)if(!e.includes(n))return!1;return!0}}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",{staticClass:"Json2Go"},[n("el-row",{attrs:{gutter:24}},[n("h2",[n("el-col",{attrs:{span:20}},[n("el-checkbox",{attrs:{label:"gorm",border:""},model:{value:t.useGorm,callback:function(e){t.useGorm=e},expression:"useGorm"}},[t._v("gorm")]),t._v(" "),n("el-checkbox",{attrs:{label:"json",border:""},model:{value:t.useJson,callback:function(e){t.useJson=e},expression:"useJson"}}),t._v(" "),n("el-checkbox",{attrs:{label:"form",border:""},model:{value:t.useForm,callback:function(e){t.useForm=e},expression:"useForm"}}),t._v(" "),n("el-checkbox",{attrs:{label:"flatten",border:""},model:{value:t.flatten,callback:function(e){t.flatten=e},expression:"flatten"}})],1)],1)]),t._v(" "),n("el-row",{staticClass:"textareatitle",staticStyle:{"text-align":"center"},attrs:{gutter:24}},[n("el-col",{attrs:{span:12}},[n("h3",[t._v(" Json")])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("h3",[t._v("go struct")])])],1),t._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{staticStyle:{padding:"0"},attrs:{span:12}},[n("el-input",{staticClass:"leftinput",attrs:{type:"textarea",placeholder:"输入 Json 结构",rows:32},model:{value:t.jsonContent,callback:function(e){t.jsonContent=e},expression:"jsonContent"}})],1),t._v(" "),n("el-col",{staticStyle:{padding:"0"},attrs:{span:12}},[n("el-input",{staticClass:"rightinput",attrs:{type:"textarea",placeholder:"Golang struct 语句",rows:32,value:t.structContent}})],1)],1)],1)},staticRenderFns:[]},u=n("VU/8")(i,c,!1,null,null,null).exports,m={name:"FormatJson",data:()=>({msg:"格式化json",jsonContent:"",escapeUnicode:!0,sortObjectKeys:!0,jsonPatternOk:!0,jsonFormat:""}),watch:{jsonContent(t){this.$options.methods.formatJson(this,t,this.escapeUnicode,this.sortObjectKeys)},escapeUnicode(t){this.$options.methods.formatJson(this,this.jsonContent,t,this.sortObjectKeys)},sortObjectKeys(t){this.$options.methods.formatJson(this,this.jsonContent,this.escapeUnicode,t)}},methods:{formatJson(t,e,n,s){if(t.jsonPatternOk&&(document.getElementById("jsoneditor").innerHTML=""),t.jsonPatternOk=!0,t.jsonFormat="",""!==e)try{let o=JSON.parse(e),r={mode:"view",escapeUnicode:n,sortObjectKeys:s,navigationBar:!1};new JSONEditor(document.getElementById("jsoneditor"),r,o).expandAll(),t.jsonFormat="",t.jsonContent=JSON.stringify(o,null,"  ")}catch(e){t.jsonPatternOk=!1,t.jsonFormat=e.message}}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",{staticClass:"Json2Go"},[n("el-row",{attrs:{gutter:24}},[n("h2",[n("el-col",{attrs:{span:20}},[n("el-checkbox",{attrs:{label:"sortKeys",border:""},model:{value:t.sortObjectKeys,callback:function(e){t.sortObjectKeys=e},expression:"sortObjectKeys"}}),t._v(" "),n("el-checkbox",{attrs:{label:"escapeUnicode",border:""},model:{value:t.escapeUnicode,callback:function(e){t.escapeUnicode=e},expression:"escapeUnicode"}})],1)],1)]),t._v(" "),n("el-row",{staticClass:"textareatitle",attrs:{gutter:24}},[n("el-col",{attrs:{span:12}},[n("h3",[t._v(" Json")])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("h3",[t._v(" Result")])])],1),t._v(" "),n("el-row",{staticStyle:{padding:"0"},attrs:{gutter:24}},[n("el-col",{attrs:{span:12}},[n("el-input",{staticClass:"leftinput",attrs:{type:"textarea",placeholder:"输入 Json 语句",rows:32},model:{value:t.jsonContent,callback:function(e){t.jsonContent=e},expression:"jsonContent"}})],1),t._v(" "),n("el-col",{staticStyle:{height:"600px"},attrs:{span:12}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.jsonPatternOk,expression:"jsonPatternOk"}],attrs:{id:"jsoneditor"}}),t._v(" "),n("el-input",{directives:[{name:"show",rawName:"v-show",value:!t.jsonPatternOk,expression:"!jsonPatternOk"}],attrs:{type:"textarea",rows:32},model:{value:t.jsonFormat,callback:function(e){t.jsonFormat=e},expression:"jsonFormat"}})],1)],1)],1)},staticRenderFns:[]};var f=n("VU/8")(m,p,!1,function(t){n("UDrp")},null,null).exports,d=new VueRouter({routes:[{path:"/",name:"Sql2Go",component:l},{path:"/json2go",name:"Json2Go",component:u},{path:"/formatJson",name:"FormatJson",component:f}]}),h=n("f3bp");Vue.config.productionTip=!1,Vue.use(h.a),new Vue({el:"#app",router:d,components:{App:o},template:"<App/>"})},TyYf:function(t,e){},UDrp:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e0293234c64f434711b3.js.map